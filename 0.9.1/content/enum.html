<div class="WordSection1">

<h1>
	<a name="_Ref333577574"></a><a name="_Toc364255807"><span>9<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>Enums</a>
</h1>

<p class="MsoNormal">An enum type is a distinct subtype of the
Number primitive type with an associated set of named constants that define the
possible values of the enum type.</p>

<h2>
	<a name="_Toc364255808"></a><a name="_Ref350869434"></a><a name="_Ref350702099"></a><a name="_Ref350701399"></a><a name="_Ref350695559"><span>9.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;</span></span>Enum Declarations</a>
</h2>

<p class="MsoNormal"><span>An enum declaration declares an <b><i>enum type</i></b> and an <b><i>enum object</i></b> in the containing module.</span>
</p>

<p class="Grammar"><span>EnumDeclaration:<br>
</span><span class="Terminal"><span style='font-style:normal'>enum</span></span>&nbsp;&nbsp;&nbsp;Identifier&nbsp;&nbsp;&nbsp;<span class="Terminal"><span style='font-style:normal'>{</span></span><span>&nbsp;&nbsp;&nbsp;EnumBody<sub>opt</sub>&nbsp;&nbsp;
</span><span class="Terminal"><span style='font-style:normal'>}</span></span></p>

<p class="MsoNormal"><span>The enum type and enum object declared by
an <span class="Production">EnumDeclaration</span> both have the name given by
the <span class="Production">Identifier</span> of the declaration. The enum type
is a distinct subtype of the Number primitive type. The enum object is a
variable of an anonymous object type containing a set of properties, all of the
enum type, corresponding to the values declared for the enum type in the body
of the declaration. The enum object’s type furthermore includes a numeric index
signature with the signature ‘[x: number]: string’.</span></p>

<p class="MsoNormal"><span>The <span class="Production">Identifier</span>
of an enum declaration may not be one of the predefined type names (section </span>3.6.1).
</p>

<p class="MsoNormal">The example</p>

<p class="Code">
	<span style='color:blue;background:white'>enum</span><span> Color { Red, Green, Blue }</span>
</p>

<p class="MsoNormal"><span>declares a subtype of the Number primitive
type called ‘Color’ and introduces a variable ‘Color’ with a type that
corresponds to the declaration</span></p>

<p class="Code"><span style='color:blue;background:white'>var</span><span> Color: {<br>
&nbsp;&nbsp;&nbsp;&nbsp;[x: <span style='color:blue;background:white'>number</span>]: <span style='color:blue;background:white'>string</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Red: Color;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Green: Color;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Blue: Color;<br>
};</span></p>

<p class="MsoNormal"><span>The numeric index signature reflects a
“reverse mapping” that is automatically generated in every enum object, as
described in section </span>9.4. The
reverse mapping provides a convenient way to obtain the string representation
of an enum value. For example</p>

<p class="Code"><span style='color:blue;background:white'>var</span><span> c = Color.Red;<br>
console.log(Color[c]);&nbsp;&nbsp;<span style='color:green;background:white'>// Outputs
&quot;Red&quot;</span></span></p>

<h2><a name="_Toc364255809"><span>9.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>Enum Members</a></h2>

<p class="MsoNormal"><span>The body of an enum declaration defines
zero or more enum members which are the named values of the enum type.<span style='background:white'> Each enum member has an associated numeric value of
the primitive type introduced by the enum declaration.</span></span></p>

<p class="Grammar"><span>EnumBody:<br>
ConstantEnumMemberList&nbsp;&nbsp;&nbsp;</span><span class="Terminal"><span style='font-style:normal'>,</span></span><sub>opt</sub><span><br>
ConstantEnumMemberList&nbsp;&nbsp;&nbsp;</span><span class="Terminal"><span style='font-style:normal'>,</span></span>&nbsp;&nbsp;
ComputedEnumMemberList&nbsp;&nbsp;&nbsp;<span class="Terminal"><span style='font-style:normal'>,</span></span><sub>opt</sub><span><br>
ComputedEnumMemberList&nbsp;&nbsp;&nbsp;</span><span class="Terminal"><span style='font-style:normal'>,</span></span><sub>opt</sub>
</p>

<p class="Grammar"><span>ConstantEnumMemberList:<br>
ConstantEnumMember<br>
ConstantEnumMemberList&nbsp;&nbsp;&nbsp;</span><span class="Terminal"><span style='font-style:normal'>,</span></span>&nbsp;&nbsp;&nbsp;ConstantEnumMember
</p>

<p class="Grammar"><span>ConstantEnumMember:<br>
PropertyName<br>
PropertyName&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;&nbsp;IntegerLiteral</span></p>

<p class="Grammar"><span>IntegerLiteral:<br>
SignedInteger<br>
HexIntegerLiteral</span></p>

<p class="Grammar"><span>ComputedEnumMemberList:<br>
ComputedEnumMember<br>
ComputedEnumMemberList&nbsp;&nbsp;&nbsp;</span><span class="Terminal"><span style='font-style:normal'>,</span></span>&nbsp;&nbsp;&nbsp;ComputedEnumMember
</p>

<p class="Grammar"><span>ComputedEnumMember:<br>
PropertyName&nbsp;&nbsp;&nbsp;</span><span class="Terminal"><span style='font-style:
normal'>=</span></span>&nbsp;&nbsp;&nbsp;AssignmentExpression</p>

<p class="MsoNormal"><span style='background:white'>Enum members are
either <b><i>constant members</i></b> or <b><i>computed members</i></b>. Constant
members have known constant values that may be substituted in place of references
to the members at compile-time. Computed members have values that are computed
at run-time and not known at compile-time.</span></p>

<p class="MsoNormal"><i>TODO: Decide
whether references to constant members are always replaced with their values or
whether this is a compiler option.</i></p>

<p class="MsoNormal">The body of an
enum declaration consists of a list of zero or more constant members followed
by zero or more computed members.</p>

<p class="MsoNormal">A constant member
declared with an integer literal value is assigned that value. A constant
member declared without an integer literal value is assigned the value of the
preceding constant member plus one, or the value zero if it is the first member
in the enum body. The values of constant members are computed at compile-time
and may be substituted for references to the members in the generated
JavaScript code.</p>

<p class="MsoNormal">Expressions specified
for computed members must produce values of type Any, the Number primitive
type, or an enum type. The values of computed members are not known at
compile-time and no substitution is performed for references to computed
members.</p>

<p class="MsoNormal">In the example</p>

<p class="Code"><span style='color:blue;background:white'>enum</span><span style='background:white'> Test {<br>
&nbsp;&nbsp;&nbsp;&nbsp;A,<br>
&nbsp;&nbsp;&nbsp;&nbsp;B,<br>
&nbsp;&nbsp;&nbsp;&nbsp;C = <span style='color:maroon'>10</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;D,<br>
&nbsp;&nbsp;&nbsp;&nbsp;E = Math.floor(Math.random() * <span style='color:maroon'>1000</span>)<br>
}</span></p>

<p class="MsoNormal"><span style='background:white'>‘A’, ‘B’, ‘C’, and
‘D’ are constant members with values 0, 1, 10, and 11 respectively, and ‘E’ is
a computed member.</span></p>

<p class="MsoNormal">In the example</p>

<p class="Code"><span style='color:blue;background:white'>enum</span><span style='background:white'> Style {<br>
&nbsp;&nbsp;&nbsp;&nbsp;None = <span style='color:maroon'>0</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Bold = <span style='color:maroon'>1</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Italic = <span style='color:maroon'>2</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Underline = <span style='color:maroon'>4</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Emphasis = Style.Bold | Style.Italic,<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hyperlink = Style.Bold | Style.Underline<br>
}</span></p>

<p class="MsoNormal">the first four
members are constant members and the last two are computed members. Note that
computed member declarations can reference previously declared members. Also,
because enums are subtypes of the Number primitive type, numeric operators,
such as the bitwise OR operator, can be used to compute enum values.</p>

<h2>
	<a name="_Toc364255810"></a><a name="_Ref352749354"><span style='background:white'>9.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>Declaration Merging</a></h2>

<p class="MsoNormal"><a name="_Ref351458374"><span>Enums are
“open-ended” and enum declarations with the same qualified name relative to a
common root (as defined in section </span></a>2.3) define a single enum type and contribute
to a single enum object.</p>

<p class="MsoNormal">It isn’t possible for one enum declaration
to continue the automatic numbering sequence of another, and when an enum type
has multiple declarations, only one declaration is permitted to omit a value
for the first member.</p>

<h2>
	<a name="_Toc364255811"></a><a name="_Ref354734560"><span style='background:white'>9.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>Code Generation</a></h2>

<p class="MsoNormal">An enum
declaration generates JavaScript equivalent to the following:</p>

<p class="Code">
	<span style='color:blue;background:white'>var</span> <span class="CodeItalic"><span>&lt;<span style='background:white'>EnumName</span>&gt;</span></span><span>;<br>
(<span style='color:blue;background:white'>function</span> (</span><span class="CodeItalic"><span>&lt;<span style='background:white'>EnumName</span>&gt;</span></span><span>) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="CodeItalic">&lt;EnumMemberAssignments&gt;</span><span><br>
})(</span><span class="CodeItalic"><span>&lt;<span style='background:
white'>EnumName</span>&gt;</span></span><span>||(</span><span class="CodeItalic">&lt;EnumName&gt;</span><span>={}));</span>
</p>

<p class="MsoNormal">
	<span class="CodeItalic">EnumName</span> is the name of the enum.</p>

<p class="MsoNormal"><span class="CodeItalic">EnumMemberAssignments</span> is a sequence of assignments, one for each enum member, in order
they are declared, of the form</p>

<p class="Code">
	<span class="CodeItalic">&lt;EnumName&gt;</span><span>[</span><span class="CodeItalic">&lt;EnumName&gt;</span>.<span class="CodeItalic">&lt;MemberName&gt;</span><span> = </span><span class="CodeItalic">&lt;MemberValue&gt;</span><span>] = &quot;</span><span class="CodeItalic">&lt;MemberName&gt;</span>&quot;;
</p>

<p class="MsoNormal"><span>where <span class="CodeItalic">MemberName</span>
is the name of the enum member and <span class="CodeItalic">MemberValue</span> is
the assigned constant value or the code generated for the computed value
expression.</span></p>

<p class="MsoNormal"><i>TODO: In general, when generating code
for a property access, use quoted names and bracket notation for non-identifier
member names.</i></p>

<p class="MsoNormal"><span style='background:white'>For example, the
‘Color’ enum example from section </span>9.1 generates the following JavaScript:
</p>

<p class="Code"><span style='color:blue;background:white'>var</span><span style='background:white'> Color;<br>
(<span style='color:blue'>function</span> (Color) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;Color[Color.Red = <span style='color:maroon'>0</span>] = <span style='color:maroon'>&quot;Red&quot;</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Color[Color.Green = <span style='color:maroon'>1</span>] = <span style='color:maroon'>&quot;Green&quot;</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Color[Color.Blue = <span style='color:maroon'>2</span>] = <span style='color:maroon'>&quot;Blue&quot;</span>;<br>
})(Color||(Color={}));</span></p>

</div>
